FROM tomcat:9.0-jdk17-temurin

# d·ªçn app m·∫∑c ƒë·ªãnh
RUN rm -rf /usr/local/tomcat/webapps/*

# (n·∫øu copy WAR s·∫µn)
COPY target/*.war /usr/local/tomcat/webapps/ROOT.war

# üîá t·∫Øt shutdown port 8005 v√† gi·ªØ HTTP ·ªü 8080
RUN sed -i 's/Server port="8005"/Server port="-1"/' /usr/local/tomcat/conf/server.xml \
 && sed -i 's/Connector port="8080"/Connector port="8080"/' /usr/local/tomcat/conf/server.xml

EXPOSE 8080
CMD ["catalina.sh","run"]
